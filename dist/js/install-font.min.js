"use strict";const electron=require("electron"),BrowserWindow=electron.BrowserWindow,app=electron.app,dialog=require("electron").dialog,extract=require("extract-zip"),fs=require("fs-extra"),Store=require("electron-store"),store=new Store,tempPath=app.getPath("temp");var Download,dl;function downloadFont(e,o,n){(dl=new Download(`https://google-webfonts-helper.herokuapp.com/api/fonts/${e}?download=zip&subsets=latin&formats=ttf`,n)).on("progress",e=>{console.log(o+" - download: "+e+"%")}),dl.on("end",e=>{0===e?(console.log("finished successfully"),extract(n,{dir:`${tempPath}/com.midwinter-dg.mdg-font-manager/${o}/`},function(e){e?dialog.showErrorBox(`An error occured whilst extracting: ${o}`,e.code):(fs.removeSync(n),fs.moveSync(`${tempPath}/com.midwinter-dg.mdg-font-manager/${o}`,store.get("fontDirectories.activePath")+o),BrowserWindow.getFocusedWindow().webContents.send("remove-bezel",o))})):(dialog.showErrorBox("An error occured whilst downloading",`The font ${o} was not downloaded`),BrowserWindow.getFocusedWindow().webContents.send("remove-bezel","font-not-installed"))}),dl.start()}Download=require("./download.min").Download,app.on("install-font",e=>{var{id:o,name:n}=e,t=`${tempPath}/com.midwinter-dg.mdg-font-manager/${o}.zip`;BrowserWindow.getFocusedWindow().webContents.send("display-bezel",n),downloadFont(o,n,t)});
//# sourceMappingURL=maps/install-font.min.js.map
