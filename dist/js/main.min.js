"use strict";const{app:app,BrowserWindow:BrowserWindow,shell:shell,ipcMain:ipcMain}=require("electron"),url=require("url"),path=require("path"),dialog=require("electron").dialog,Store=require("electron-store"),fs=require("fs-extra");let win,store=new Store({defaults:{windowBounds:{width:800,height:600,x:0,y:0},fontDirectories:{activePath:app.getPath("home")+"/Library/Fonts/",disabledPath:app.getPath("home")+"/Library/Fonts Disabled/"},fontPreview:{size:26,color:"#000000"}}});function createWindow(){let{x:e,y:o,width:t,height:i}=store.get("windowBounds");function n(){store.set("windowBounds",win.getBounds())}(win=new BrowserWindow({show:!1,titleBarStyle:"hidden",x:e,y:o,width:t,height:i,minWidth:400,minHeight:300,backgroundColor:"#031320",icon:path.join(__dirname,"../assets/icon/Icon.icns")})).setSheetOffset(24),win.loadURL(url.format({pathname:path.join(__dirname,"../html/app.html"),protocol:"file:",slashes:!0})),win.once("ready-to-show",()=>{win.show()}),win.on("resize",n),win.on("move",n),win.on("closed",()=>{app.quit()}),require("./app-menu.min"),require("./list-menus.min"),require("./font-menu.min"),require("./install-font.min")}function exportFonts(e){dialog.showSaveDialog(win,{defaultPath:app.getPath("desktop")+"/Exported Fonts",buttonLabel:"Export Fonts"},function(o){if(void 0===o)return;for(let t=0,i=e.length;t<i;t++)fs.copy(e[t][1],o+"/"+e[t][0],e=>{e&&dialog.showErrorBox("An error occured whilst exporting the fonts",e.code)})})}app.on("ready",createWindow),app.on("open-folder",e=>{shell.openExternal("file://"+store.get("fontDirectories."+e))}),app.on("choose-folder",e=>{let o=store.get("fontDirectories."+e),t="Active";"disabledPath"===e&&(t="Disabled"),dialog.showOpenDialog(win,{defaultPath:o,buttonLabel:"Choose "+t+" Fonts Folder",properties:["openDirectory","showHiddenFiles","createDirectory"]},function(o){o&&(store.set("fontDirectories."+e,o[0]+"/"),win.webContents.send("update-path"))})}),app.on("export-single",e=>{exportFonts([e])}),ipcMain.on("export-list",(e,o)=>{exportFonts(o)});
//# sourceMappingURL=maps/main.min.js.map
