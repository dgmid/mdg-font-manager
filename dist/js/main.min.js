"use strict";const{app:app,BrowserWindow:BrowserWindow,shell:shell,ipcMain:ipcMain}=require("electron"),url=require("url"),path=require("path"),dialog=require("electron").dialog,Store=require("electron-store"),fs=require("fs-extra");let win,store=new Store({defaults:{windowBounds:{width:800,height:600,x:0,y:0},fontDirectories:{activePath:app.getPath("home")+"/Library/Fonts/",disabledPath:app.getPath("home")+"/Library/Fonts Disabled/"},fontOrder:{active:0,disabled:0},fontPreview:{size:8,color:"#000000"}}});function createWindow(){let{x:e,y:t,width:o,height:n}=store.get("windowBounds");function i(){store.set("windowBounds",win.getBounds())}(win=new BrowserWindow({show:!1,titleBarStyle:"hidden",x:e,y:t,width:o,height:n,minWidth:400,minHeight:300,backgroundColor:"#031320",icon:path.join(__dirname,"../assets/icon/Icon.icns")})).setSheetOffset(24),win.loadURL(url.format({pathname:path.join(__dirname,"../html/app.html"),protocol:"file:",slashes:!0})),win.once("ready-to-show",()=>{win.show()}),win.on("resize",i),win.on("move",i),win.on("closed",()=>{app.quit()}),require("./app-menu.min"),require("./list-menus.min"),require("./font-menu.min"),require("./glyph-menu.min"),require("./install-font.min")}function exportFonts(e){dialog.showSaveDialog(win,{defaultPath:app.getPath("desktop")+"/Exported Fonts",buttonLabel:"Export Fonts"},function(t){if(void 0===t)return;{let o=0;for(let n=0,i=e.length;n<i;n++)try{fs.copySync(e[n][1],t+"/"+e[n][0])}catch(e){o++,console.log(e)}finally{n+1==i&&(o>1?win.webContents.send("export-failed"):win.webContents.send("export-ok",t))}}})}app.on("ready",createWindow),app.on("open-folder",e=>{shell.openExternal("file://"+store.get("fontDirectories."+e))}),app.on("choose-folder",e=>{let t=store.get("fontDirectories."+e),o="Active";"disabledPath"===e&&(o="Disabled"),dialog.showOpenDialog(win,{defaultPath:t,buttonLabel:"Choose "+o+" Fonts Folder",properties:["openDirectory","showHiddenFiles","createDirectory"]},function(t){t&&(store.set("fontDirectories."+e,t[0]+"/"),win.webContents.send("update-path"))})}),app.on("export-single",e=>{exportFonts([e])}),ipcMain.on("export-list",(e,t)=>{exportFonts(t)}),ipcMain.on("import",(e,t)=>{let o="left-panel"==t.location?store.get("fontDirectories.activePath"):store.get("fontDirectories.disabledPath"),n=0;for(let e=0,i=t.list.length;e<i;e++){let r=t.list[e].split("/").pop();try{fs.moveSync(t.list[e],o+r,{overwrite:!0})}catch(e){n++,console.log(e)}finally{e+1==i&&(n>1?win.webContents.send("import-failed"):win.webContents.send("import-ok",o))}}});
//# sourceMappingURL=maps/main.min.js.map
