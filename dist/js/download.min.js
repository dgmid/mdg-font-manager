"use strict";var Download,EventEmitter,defaultOptions,fill,getOptionArray,spawn,__hasProp={}.hasOwnProperty,__extends=function(t,r){for(var n in r)__hasProp.call(r,n)&&(t[n]=r[n]);function e(){this.constructor=t}return e.prototype=r.prototype,t.prototype=new e,t.__super__=r.prototype,t};spawn=require("child_process").spawn,EventEmitter=require("events").EventEmitter,defaultOptions={createDirs:["--create-dirs"],insecure:["--insecure"],percentage:["--progress-bar"],followRedirect:["--location"]},Download=function(t){function r(t,r,n,e){this.url=null!=t?t:null,this.dest=null!=r?r:null,null==n&&(n={}),null==e&&(e=!1),fill(n,defaultOptions),this.options=getOptionArray(n,this.dest,this.url),this.command="curl "+this.options.join(" "),e&&this.start()}return __extends(r,EventEmitter),r.prototype.start=function(){var t,r;if(null===this.url||null===this.dest)throw new Error("node-curl-download: Url and destination path must be provided.");return r=0,this._child_process=spawn("curl",this.options),t=this,this._child_process.on("exit",function(r){t.emit("end",r)}),this._child_process.stderr.on("data",function(n){var e;n=n.toString("ascii"),/\d+(\.\d{1,2})/.test(n)&&(e=parseInt(RegExp.lastMatch,10),r!==e&&e>=r&&(r=e,t.emit("progress",e)))}),this._child_process.stdin.end()},r.prototype.stop=function(){this._child_process.kill()},r}(),getOptionArray=function(t,r,n){var e,o,i;for(o in e=[],t)i=t[o],e=e.concat(i);return e=e.concat(["-o",r,n])},fill=function(t,r){var n,e,o,i,s;for(s=[],e=0,o=(i=Object.keys(r)).length;e<o;e++)void 0===t[n=i[e]]?s.push(t[n]=r[n]):s.push(void 0);return s},module.exports.Download=Download;
//# sourceMappingURL=maps/download.min.js.map
