{"version":3,"sources":["app.js"],"names":["window","$","jQuery","require","fs","ipcRenderer","electron","remote","dialog","Store","store","populateFontLists","activePath","disabledPath","get","html","addItemsToList","fadeIn","updateLists","hide","remove","prop","oldPath","newPath","list","readdir","err","files","total","reverse","file","item","statSync","isDirectory","startsWith","append","move","count","callback","rename","code","showErrorBox","deleteItems","updateButtonState","val","show","active","length","disabled","deleteSelected","fadeOut","counter","items","each","index","value","this","data","exportSelected","selected","message","$this","push","send","updateAll","setDragArea","id","dragArea","document","getElementById","draggedItems","location","ondragover","addClass","ondragleave","removeClass","ondragend","ondrop","event","preventDefault","dataTransfer","path","on","which","name","toggleClass","click","mouseup","e","focus","showMessageBox","detail","buttons","Notification","body","listItems","children","set","empty","dir","bind","searchString","text","toUpperCase","indexOf","hasClass"],"mappings":"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","file":"../app.min.js","sourcesContent":["'use strict'\n\nwindow.$ = window.jQuery = require( 'jquery' )\nconst fs = require( 'fs-extra' )\nconst {ipcRenderer} = require( 'electron' )\nconst electron = require(\"electron\")\nconst remote = electron.remote\nconst dialog = remote.dialog\nconst Store = require( 'electron-store' )\nconst store = new Store()\n\npopulateFontLists()\n\n\n\n//note(@duncanmid): populate font lists\n\nfunction populateFontLists() {\n\t\n\tlet {activePath, disabledPath} = store.get('fontDirectories')\n\t\n\t$('#active-menu').html(activePath)\n\t$('#disabled-menu').html(disabledPath)\n\t\n\taddItemsToList(\tactivePath, disabledPath, 'active' )\n\taddItemsToList( disabledPath, activePath, 'disabled' )\n\t\n\t$('#left-panel ul, #right-panel ul').fadeIn('fast')\n}\n\n\n\n//note(@duncanmid): update lists\n\nfunction updateLists() {\n\t\n\t$('#active-count, #disabled-count').html('').hide()\n\t$('#active-list li, #disabled-list li').remove()\n\t$('#update-all').prop('disabled', true)\n\t\n\tpopulateFontLists()\n\t\n}\n\n\n\n//note(@duncanmid): add items to lists\n\nfunction addItemsToList( oldPath, newPath, list) {\n\t\n\tfs.readdir( oldPath, ( err, files ) => {\n\t\t\n\t\tif ( err ) throw  err\n\t\t\n\t\tlet total = 0\n\t\t\n\t\t\n\t\tif( store.get( `fontOrder.${list}` ) == 1 ) { \n\t\t\n\t\t\tfiles.reverse()\n\t\t}\n\t\t\n\t\tfor ( let file of files ) {\n\t\t\t\n\t\t\tlet item\n\t\t\tlet stats = fs.statSync( oldPath + file )\n\t\t\t\n\t\t\tif( stats.isDirectory() ) {\n\t\t\t\t\t\n\t\t\t\t\titem = 'folder'\n\t\t\t\t\t\n\t\t\t\t} else {\n\t\t\t\t\t\n\t\t\t\t\titem = 'file'\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tif( !file.startsWith('.') ) {\n\t\t\t\t\t\t\n\t\t\t\t\t$(`#${list}-list`).append(`<li class=\"${item}\" data-name=\"${file}\" data-oldpath=\"${oldPath}${file}\" data-newpath=\"${newPath}${file}\" data-type=\"${item}\" title=\"${file}\"><div>${file}</div></li>`)\n\t\t\t\t\t\n\t\t\t\t\ttotal++\n\t\t\t\t}\n\t\t}\n\t\t\n\t\t$(`#${list}-total`).html( total )\n\t\t\n\t})\n}\n\n\n\n//note(@duncanmid): move selected files or folders\n\nfunction move( oldPath, newPath, count, total, callback ) {\t\n\t\n\tfs.rename(oldPath, newPath, function (err) {\n\t\t\n\t\tif (err) {\n\t\t\t\n\t\t\tswitch( err.code ) {\n\t\t\t\t\n\t\t\t\tcase 'ENOTEMPTY':\n\t\t\t\t\t\n\t\t\t\t\tdialog.showErrorBox(\n\t\t\t\t\t\t'An error occured whilst moving the fonts',\n\t\t\t\t\t\t'Some items could not be moved - you may have duplicate items in your Active and Disabled folders.'\n\t\t\t\t\t)\n\t\t\t\t\t\n\t\t\t\tbreak;\n\t\t\t\t\n\t\t\t\tcase 'ENOENT':\n\t\t\t\t\t\n\t\t\t\t\tdialog.showErrorBox(\n\t\t\t\t\t\t'An error occured whilst moving the fonts',\n\t\t\t\t\t\t'Make sure the paths for the Active and Disabled directories are correctly set. If you don\\'t have a \"Fonts Disabled\" folder in your home Library, you may need to create one.'\n\t\t\t\t\t)\n\t\t\t\t\t\n\t\t\t\tbreak;\n\t\t\t\t\n\t\t\t\tdefault:\n\t\t\t\t\n\t\t\t\tdialog.showErrorBox(\n\t\t\t\t\t'An error occured whilst moving the fonts', err.code\n\t\t\t\t)\n\t\t\t}\n\t\t}\n\t\t\n\t\tif( (count + 1) === total ) {\n\t\t\t\n\t\t\tcallback()\n\t\t}\n\t})\n}\n\n\n\n//note(@duncanmid): delete items\n\nfunction deleteItems( oldPath, count, total, callback ) {\n\t\n\tfs.remove(oldPath, function (err) {\n\t\t\n\t\tif (err) {\n\t\t\t\n\t\t\tif (err.code) {\n\t\t\t\t\n\t\t\t\tdialog.showErrorBox(\n\t\t\t\t\t'An error occured whilst deleting the fonts', err.code\n\t\t\t\t)\n\t\t\t}\n\t\t}\n\t\t\n\t\tif( (count + 1) === total ) {\n\t\t\t\n\t\t\tcallback()\n\t\t}\n\t})\n}\n\n\n\n//note(@duncanmid): update fonts button state\n\nfunction updateButtonState() {\n\t\n\t$('#search').val('')\n\t$('ul li').show()\n\t\n\tlet active\t\t= $('#active-list li.selected').length,\n\t\tdisabled \t= $('#disabled-list li.selected').length\n\t\n\tif( active + disabled > 0 ) {\n\t\t\n\t\t$('#update-all').prop('disabled', false)\n\t\n\t} else {\n\t\t\n\t\t$('#update-all').prop('disabled', true)\n\t}\n\t\n\tif( active > 0 ) {\n\t\t\n\t\t$('#active-count').html( active ).show()\n\t\n\t} else {\n\t\t\n\t\t$('#active-count').html('').hide()\n\t}\n\t\n\tif( disabled > 0 ) {\n\t\t\n\t\t$('#disabled-count').html( disabled ).show()\n\t\n\t} else {\n\t\t\n\t\t$('#disabled-count').html('').hide()\n\t}\n}\n\n\n\n//note(@duncanmid): on click list item\n\n$('body').on('mouseup', '#active-list li, #disabled-list li', function(event) {\n\t\n\tif( event.which === 3 ) {\n\n\t\t\n\t\tvar name = $(this).data('name'),\n\t\t\tpath = $(this).data('oldpath')\n\t\t\n\t\tipcRenderer.send('show-font-menu', [name, path] )\n\t\t\n\t} else {\n\t\t\n\t\t$(this).toggleClass('selected')\n\t\tupdateButtonState()\n\t}\n})\n\n\n\n//note(@duncanmid): delete selected\n\nfunction deleteSelected() {\n\t\n\t$('#left-panel ul, #right-panel ul').fadeOut('fast')\n\t\n\tvar counter = 0,\n\t\titems = $('#active-list li.selected, #disabled-list li.selected')\n\t\n\titems.each(function (index, value) {\n\t\t\n\t\tvar oldPath = $(this).data('oldpath')\n\t\t\n\t\tdeleteItems( oldPath, counter++, items.length, updateLists )\n\t})\n}\n\n\n\n//note(@duncanmid): export selected\n\nfunction exportSelected() {\n\t\n\tvar selected = $('#active-list li.selected, #disabled-list li.selected'),\n\t\tmessage = []\n\t\n\tselected.each( function() {\n\t\t\n\t\tvar $this = $(this)\n\t\tmessage.push( [ $this.data('name') ,$this.data('oldpath') ] )\n\t})\n\t\n\tipcRenderer.send('export-list', message)\n}\n\n\n\n//note(@duncanmid): update all\n\nfunction updateAll() {\n\t\n\t$('#left-panel ul, #right-panel ul').fadeOut('fast')\n\t\n\tvar counter = 0,\n\t\titems = $('#active-list li.selected, #disabled-list li.selected')\n\t\t\n\titems.each(function (index, value) {\n\t\t\n\t\tvar oldPath = $(this).data('oldpath'),\n\t\t\tnewPath = $(this).data('newpath')\n\t\t\n\t\tmove( oldPath, newPath, counter++, items.length, updateLists )\n\t})\n}\n\n\n$('#update-all').click( () => {\n\t\n\tupdateAll()\n})\n\n\n\n//note(@duncanmid): open font folder menus\n\n$('#active-menu').mouseup( (e) => {\n\t\n\te.preventDefault()\n\tipcRenderer.send('show-folder-menu', 'active')\n})\n\n$('#disabled-menu').mouseup( (e) => {\n\t\n\te.preventDefault()\n\tipcRenderer.send('show-folder-menu', 'disabled')\n})\n\n\n\n//note(@duncanmid): list-menu commands\n\nipcRenderer.on('select-all', (event, message) => {\n\t\n\t$('#' + message + '-list li').addClass('selected')\n\tupdateButtonState()\n})\n\nipcRenderer.on('deselect-all', (event, message) => {\n\t\n\t$('#' + message + '-list li').removeClass('selected')\n\tupdateButtonState()\n})\n\nipcRenderer.on('toggle-selection', (event, message) => {\n\t\n\t$('#' + message + '-list li').toggleClass('selected')\n\tupdateButtonState()\n})\n\nipcRenderer.on('find', () => {\n\t\n\t$('#search').focus()\n})\n\nipcRenderer.on('update-lists', () => {\n\t\n\tif( $('#update-all').prop('disabled') ) {\n\t\n\t\tdialog.showErrorBox(\n\t\t\t'No fonts are selected',\n\t\t\t'Select the fonts you would like to activate or disable.'\n\t\t)\n\t\n\t} else {\n\t\n\t\tupdateAll()\n\t}\n})\n\nipcRenderer.on('delete-fonts', () => {\n\n\tvar selected = $('#active-list li.selected, #disabled-list li.selected')\n\t\n\tif( selected.length > 0 ) {\n\t\t\n\t\tvar response = dialog.showMessageBox({\t\n\t\t\t\t\t\tmessage: 'Are you sure you want to delete the selected fonts?',\n\t\t\t\t\t\tdetail: 'This operation is not reversable.',\n\t\t\t\t\t\tbuttons: ['OK','Cancel']\n\t\t\t\t\t})\n\t\t\n\t\tif( response === 0 ) {\n\t\t\n\t\t\tdeleteSelected()\n\t\t}\n\t\n\t} else {\n\t\t\n\t\tdialog.showErrorBox(\n\t\t\t'No fonts are selected',\n\t\t\t'Select fonts from the Active and Disabled lists to delete them from your system.'\n\t\t)\n\t}\n})\n\nipcRenderer.on('delete-single', (event, message) => {\n\t\n\tdeleteItems( message, 0, 1, updateLists );\n})\n\nipcRenderer.on('export-fonts', () => {\n\t\n\tvar selected = $('#active-list li.selected, #disabled-list li.selected')\n\t\n\tif( selected.length > 0 ) {\n\t\t\n\t\texportSelected()\n\t\n\t} else {\n\t\t\n\t\tdialog.showErrorBox(\n\t\t\t'No fonts are selected',\n\t\t\t'Select fonts from the Active and Disabled lists to export them to the Desktop.'\n\t\t)\n\t}\n})\n\nipcRenderer.on('export-ok', (event, message) => {\n\t\n\tlet fontExportOk = new Notification('MDG Font Manager', {\n\t\tbody: `The selected fonts have been exported to: ${message}`\n\t})\n})\n\n\nipcRenderer.on('export-failed', () => {\n\t\n\tlet fontExportError = new Notification('MDG Font Manager', {\n\t\tbody: `An error occured whilst exporting the fonts.`\n\t})\n})\n\nipcRenderer.on('import-ok', (event, message) => {\n\t\n\tupdateLists()\n\t\n\tlet fontExportOk = new Notification('MDG Font Manager', {\n\t\tbody: `The fonts have been installed to: ${message}`\n\t})\n})\n\n\nipcRenderer.on('import-failed', () => {\n\t\n\tupdateLists()\n\t\n\tlet fontExportError = new Notification('MDG Font Manager', {\n\t\tbody: `An error occured whilst importing the fonts.`\n\t})\n})\n\nipcRenderer.on('update-path', () => {\n\t\n\t$('#active-list li, #disabled-list li').remove()\n\t$('#update-all').prop('disabled', true)\n\tpopulateFontLists()\n})\n\nipcRenderer.on('reload', () => {\n\t\n\tupdateLists()\n})\n\nipcRenderer.on('reorder', (event, message) => {\n\t\n\tif( message[1] == 2 ) {\n\t\t\n\t\tmessage[1] = store.get( `fontOrder.${message[0]}` )\n\t}\n\t\n\t\n\tif( store.get( `fontOrder.${message[0]}` ) == message[1] ) {\n\t\n\t\tlet list = $(`#${message[0]}-list`),\n\t\t\tlistItems = list.children('li')\n\t\t\n\t\tlist.append(listItems.get().reverse())\n\t\t\n\t\tstore.set( `fontOrder.${message[0]}`, (1 - message[1] )  )\n\t}\n})\n\n\n\n//note(@duncanmid): show / hide bezel\n\nipcRenderer.on('display-bezel', (event, message) => {\n\t\n\t$('#overlay').html(`<div class=\"bezel\"><div class=\"inner\"><img src=\"../assets/svg/loader.svg\" width=\"75\" height=\"75\"><span>installing</span><span>${message}</span></div></div>`).fadeIn('fast')\n})\n\nipcRenderer.on('remove-bezel', (event, message) => {\n\n\tif( message !== 'font-not-installed' ) {\n\t\t\n\t\t$('#active-list li, #disabled-list li').remove()\n\t\t$('#update-all').prop('disabled', true)\n\t\tpopulateFontLists()\n\t\t$('#overlay').fadeOut('fast').empty()\n\t\t\t\n\t\tlet dir = store.get('fontDirectories.activePath')\n\t\t\n\t\tlet fontInstalled = new Notification('MDG Font Manager', {\n\t\t\tbody: `The font ${message} has been installed to ${dir}`\n\t\t})\n\t\n\t} else {\n\t\t\n\t\t$('#overlay').fadeOut('fast').empty()\n\t}\n})\n\n\n\n//note(@duncanmid): drag items in to window\n\nfunction setDragArea( id ) {\n\n\tlet dragArea = document.getElementById( id )\n\t\n\tlet draggedItems = {\n\t\t'location': id,\n\t\t'list': []\n\t}\n\t\n\tdragArea.ondragover = () => {\n\t\t\n\t\t$( dragArea ).addClass('dragover')\n\t\treturn false\n\t}\n\t\n\tdragArea.ondragleave = () => {\n\t\t\n\t\t$( dragArea ).removeClass('dragover')\n\t\treturn false\n\t}\n\t\n\tdragArea.ondragend = () => {\n\t\t\n\t\t$( dragArea ).removeClass('dragover')\n\t\treturn false\n\t}\n\t\n\tdragArea.ondrop = (event) => {\n\t\t\n\t\tevent.preventDefault()\n\t\t$( dragArea ).removeClass('dragover')\n\t\t\n\t\tlet files = []\n\t\t\n\t\tfor (let item of event.dataTransfer.files) {\n\t\t\t\n\t\t\tdraggedItems.list.push( item.path )\n\t\t}\n\t\t\n\t\tipcRenderer.send('import', draggedItems )\n\t\tdraggedItems.list = []\n\t}\n}\n\nsetDragArea( 'left-panel' )\nsetDragArea( 'right-panel' )\n\n\n\n//note(@duncanmid): search field\n\n// based on https://gist.github.com/dennysfredericci/ca99b08648649b545dfd\n\n$('#search').bind('keyup', function() {\n\n\tlet searchString = $(this).val()\n\t\n\t$('ul li').each(function(index, value) {\n\t\n\tlet currentName = $(value).text()\n\tif( currentName.toUpperCase().indexOf(searchString.toUpperCase()) > -1) {\n\t\t\t\n\t\t\t$(value).show()\n\t\n\t\t} else {\n\t\t\t\n\t\t\tif(!$(value).hasClass('selected')) {\n\t\t\t\t\t\n\t\t\t\t$(value).hide()\n\t\t\t}\n\t\t}\n\t})\n})\n"]}